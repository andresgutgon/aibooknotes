## Wat?
This is the NextJS app that manage book notes.

### SSL development
So in orther to pass cookies from our server to the Chrome extension content script we need to use SSL in development to set the cookie session as `sameSite=none`. More detailed explanation in [ssl/README.md](./ssl/README.md)

### Planet Scale
I want to give a try to Planet Scale to see how it feels their free plan and
know if it's worth it to pay just in case.

The ORM used to query Planet Scale is Drizzel-orm. This ORM is all configured in
Typescript files and to evolve the DB i put 2 commands in the `package.json` of `web`. One for generating new migration files `pnpm db:generate` (autogenerated *`*.sql` files based on the schema which is defined in Typescript)  and the other one for pushing these migration file changes to Planet Scale. `pnpm db:push`. The idea is to have in the Planet Scale free plan a `development` db and a `production` db.

## ISSUE
```
ERROR: Transforming const to the configured target environment ("es5")
```
Quick fix:
Workaround for now is to change the target in your tsconfig to ESNext when you want to run the drizzle-kit commands:
```
{
  "compilerOptions": {
    // "target": "es5", // nextjs default
    "target": "ESNext", // temporary override when using drizzle-kit
    /* ... */
}
```
https://github.com/drizzle-team/drizzle-orm/issues/803
